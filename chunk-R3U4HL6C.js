import{a as v}from"./chunk-64A2DPZG.js";import{a as f}from"./chunk-NY5GKKF2.js";import{a as s}from"./chunk-5DENEAAF.js";import{M as c,Nb as h,P as n,c as o,w as a}from"./chunk-U53D5TZM.js";var g=(()=>{let t=class t{constructor(e){this.http=e}getMasterData(){return this.http.get(s.serverAPI.ROOT+s.serverAPI.MASTER_DATA)}getJob(){return this.http.get(s.serverAPI.ROOT+s.serverAPI.POST_JOB)}postRun(e){return this.http.post(s.serverAPI.ROOT+s.serverAPI.RUN_INFO,e)}postTieOn(e){return this.http.post(s.serverAPI.ROOT+s.serverAPI.TIE_ON_INFO,e)}};t.\u0275fac=function(r){return new(r||t)(n(h))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var j=new o([]),u=new o(!1),D=new o(!1),b=new o({rig_master:[],service_type:[],unit_of_measure:[],customers:[],hole_section:[],survey_type:[],tools_type:[],well_type:[]}),m=new o(!1),P=new o(!1),O=new o(!1),G=(()=>{let t=class t{constructor(e,r){this.httpClient=e,this.presurveyDataService=r,this.jobs$=j.asObservable(),this.jobGetLoading$=u.asObservable(),this.jobGetError$=D.asObservable(),this.masterData$=b.asObservable(),this.masterDataGetLoading$=m.asObservable(),this.masterDataError$=P.asObservable()}getJob(){u.next(!0),this.httpClient.getJob().pipe(a(()=>u.next(!1))).subscribe({next:e=>{j.next(e.sort((r,p)=>new Date(p.job_created_date).getTime()-new Date(r.job_created_date).getTime())),console.log(e)},error:e=>{throw console.error("Error on geting job list",e.message),new f("Error on geting job list")}})}getMasterData(){m.next(!0),this.httpClient.getMasterData().pipe(a(()=>m.next(!1))).subscribe({next:e=>{b.next(e),console.log(e)},error:e=>{console.error("Error fetching data",e),b.next({rig_master:[],service_type:[],unit_of_measure:[],customers:[],hole_section:[],survey_type:[],tools_type:[],well_type:[]})}})}addRun(e,r){return new Promise((p,d)=>{O.next(!0),this.httpClient.postRun(e).pipe(a(()=>O.next(!1))).subscribe({next:l=>{let y=l;this.httpClient.postTieOn(r).pipe().subscribe({next:I=>{let _=I;this.presurveyDataService.updatePresurveyForRun(y,_),p(!0)}})},error:l=>{console.error("Error Posting data",l),d(!1)}})})}};t.\u0275fac=function(r){return new(r||t)(n(g),n(v))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{G as a};
