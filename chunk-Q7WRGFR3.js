import{a as z}from"./chunk-3EY3MGHJ.js";import{a as q}from"./chunk-5HCIN323.js";import{a as Y}from"./chunk-L22KP5OG.js";import"./chunk-UZZJTQF6.js";import{a as U}from"./chunk-R3U4HL6C.js";import{a as Q}from"./chunk-64A2DPZG.js";import"./chunk-UGROY5TD.js";import"./chunk-2UWTBI75.js";import{h as G}from"./chunk-JTHVQGWW.js";import{a as M,b as N}from"./chunk-MOIGIHJD.js";import"./chunk-W2XR4WIZ.js";import"./chunk-NY5GKKF2.js";import"./chunk-5DENEAAF.js";import{$ as E,$a as n,Bb as A,Eb as B,Fa as S,Ib as R,Ja as t,Ka as e,La as u,Pa as g,Ra as f,S as j,Sa as h,Ub as P,Wb as $,Z as _,_ as v,_a as F,aa as I,bb as D,ib as L,na as m,oa as y,ob as p,pb as b,qb as T,sb as V,u as H,xa as s,za as C}from"./chunk-U53D5TZM.js";import"./chunk-YT5AF7SN.js";import{h as k}from"./chunk-SIAVTO45.js";function K(i,l){i&1&&(t(0,"button",23)(1,"span",24),n(2,"Analysing.."),e(),t(3,"span",25),u(4,"i",26),e()())}function O(i,l){if(i&1){let r=g();t(0,"button",27),f("click",function(){_(r);let o=h();return v(o.onUpload())}),n(1,"Import"),e()}}function J(i,l){i&1&&(t(0,"button",23)(1,"span",24),n(2,"Analysing.."),e(),t(3,"span",25),u(4,"i",26),e()())}function Z(i,l){if(i&1){let r=g();t(0,"button",27),f("click",function(){_(r);let o=h();return v(o.onUpload())}),n(1,"Import"),e()}}function W(i,l){i&1&&(t(0,"td"),n(1,"Click to calculate."),e())}function X(i,l){i&1&&(t(0,"td"),n(1,"Done"),e())}function ee(i,l){if(i&1){let r=g();t(0,"button",38),f("click",function(){_(r);let o=h(3);return v(o.navigateToSurveyCalculation())}),n(1," View Survey "),e()}}function te(i,l){i&1&&(t(0,"button",40),n(1," View Survey "),t(2,"span",25),u(3,"i",26),e()())}function ie(i,l){if(i&1){let r=g();t(0,"div",28)(1,"div",4)(2,"div",17)(3,"div",29)(4,"div",30),n(5," Quality Analysis Info "),e()(),t(6,"div",31)(7,"div",32)(8,"fieldset",33)(9,"legend"),n(10),p(11,"forignAsync"),e(),t(12,"div",34)(13,"div")(14,"table",35)(15,"tbody")(16,"tr",36)(17,"th",37),n(18,"Status"),e(),t(19,"td"),n(20,"Done"),e(),t(21,"td")(22,"button",38),f("click",function(){_(r);let o=h(2);return v(o.navigateToQualityAnalysis())}),n(23,"View Quality Analysis"),e()()()()()()()()()()()(),u(24,"div"),e(),t(25,"div",28)(26,"div",4)(27,"div",17)(28,"div",29)(29,"div",30),n(30," Survey calculation Info "),e()(),t(31,"div",31)(32,"div",32)(33,"fieldset",33)(34,"legend"),n(35),p(36,"forignAsync"),e(),t(37,"div",34)(38,"div")(39,"table",35)(40,"tbody")(41,"tr",36)(42,"th",37),n(43,"Status"),e(),s(44,W,2,0,"td"),p(45,"async"),s(46,X,2,0),t(47,"td"),s(48,ee,2,0,"button",39),p(49,"async"),s(50,te,4,0),e()()()()()()()()()()(),u(51,"div"),e()}if(i&2){let r=h(2);m(10),D(" ",T(11,4,r.selectedSurveyInfo.survey_type,"SURVEYTYPE")," QA Status "),m(25),D(" ",T(36,7,r.selectedSurveyInfo.survey_type,"SURVEYTYPE")," Survey "),m(9),S(44,b(45,10,r.surveyDataServices.surveyCalculationDetailsError$)?44:46),m(4),S(48,b(49,12,r.surveyDataServices.surveyCalculationDetailsPostLoading$)?50:48)}}function ne(i,l){i&1&&(t(0,"div",41),n(1,"No Run data found."),e())}function oe(i,l){if(i&1&&s(0,ie,52,14)(1,ne,2,0),i&2){let r=h();S(0,r.selectedSurveyInfo.survey_info_id!=-1?0:1)}}function ae(i,l){i&1&&(t(0,"div",42)(1,"span",13),n(2,"Loading..."),e()())}var xe=(()=>{let l=class l{constructor(a,o,d,c,w,x){this.route=a,this.presurveyDataServices=o,this.router=d,this.surveyDataServices=c,this.toastr=w,this.rundashDataService=x,this.surveyCalculationErrorFlag=!1,this.selectedFile=null,this.selectedSurveyInfo={survey_info_id:-1,run_name:"",run_number:0,survey_run_in:"",minimum_id:"",north_reference:"",survey_calculation_method:"",map_zone:"",geodetic_system:"",geodetic_datum:"",start_depth:0,tag_depth:0,proposal_direction:0,job_number:"",type_of_tool:0,survey_type:0,hole_section:0},this.sub=[],this.id="",this.runno="1",this.presurveyInfo={job_info:{client_rep:"",job_number:"",well_id:"",well_name:"",arrival_date:new Date(Date.now()).toISOString()},survey_info:[],tie_on_information:[],well_info:{east_coorinates:0,g_t:0,max_gt:0,max_wt:0,min_gt:0,min_wt:0,north_coordinates:0,w_t:0,well_info_id:0,central_meridian:0,easting:0,expected_well_temp:0,expected_wellbore_inclination:0,GLE:0,job_number:"",latitude_1:0,latitude_2:0,latitude_3:0,longitude_1:0,longitude_2:0,longitude_3:0,northing:0,ref_datum:"",ref_elivation:"",RKB:0,well_id:0,well_type:0}},this.wellInfo={central_meridian:0,easting:0,expected_well_temp:0,expected_wellbore_inclination:0,GLE:0,job_number:"",latitude_1:0,latitude_2:0,latitude_3:0,longitude_1:0,longitude_2:0,longitude_3:0,northing:0,ref_datum:"",ref_elivation:"",RKB:0,well_id:0,well_type:0,east_coorinates:0,g_t:0,max_gt:0,max_wt:0,min_gt:0,min_wt:0,north_coordinates:0,w_t:0,well_info_id:0},this.wellInfoI={central_meridian:0,easting:0,expected_well_temp:0,expected_wellbore_inclination:0,GLE:0,job_number:"",latitude_1:10,latitude_2:75,latitude_3:12.35,longitude_1:0,longitude_2:0,longitude_3:0,northing:0,ref_datum:"",ref_elivation:"",RKB:0,well_id:0,well_type:0,east_coorinates:0,g_t:0,max_gt:0,max_wt:0,min_gt:0,min_wt:0,north_coordinates:0,w_t:0,well_info_id:0}}ngOnInit(){this.rundashDataService.masterData$.pipe(H(1)).subscribe(a=>{a.survey_type.length>0||this.rundashDataService.getMasterData()}),this.sub.push(this.route.params.subscribe(a=>{this.id=a.jobNo,this.runno=a.runNo,this.presurveyDataServices.getInfo(this.id),this.sub.push(this.presurveyDataServices.PresurveyInfo$.pipe().subscribe({next:o=>{this.presurveyInfo=o,this.wellInfo=this.presurveyInfo.well_info,console.log(this.presurveyInfo),this.selectedSurveyInfo=this.presurveyInfo.survey_info.filter(d=>d.run_number==+this.runno)[0]??{survey_info_id:-1,run_name:"",run_number:0,survey_run_in:"",minimum_id:"",north_reference:"",survey_calculation_method:"",map_zone:"",geodetic_system:"",geodetic_datum:"",start_depth:0,tag_depth:0,proposal_direction:0,job_number:"",type_of_tool:0,survey_type:0,hole_section:0}}})),this.surveyDataServices.getSurveyCalculationDetails(this.id,this.runno).then(o=>{}),this.surveyDataServices.surveyCalculationDetailsError$.pipe().subscribe({next:o=>{this.surveyCalculationErrorFlag=o}})}))}onFileSelected(a){let o=a.target;o.files&&o.files.length>0&&(this.selectedFile=o.files[0])}onUpload(){if(this.selectedFile){let a=new FormData;a.append("file",this.selectedFile),a.append("job_number",this.id),a.append("run_number",this.runno),a.append("survey_type","1"),this.surveyDataServices.postSurveyFile(a,this.id,this.runno).then(o=>{o==!0&&this.toastr.success("Quality Analysis available,","Sucess",{positionClass:"toast-top-center"})}),console.log(this.selectedFile)}else console.error("No file selected")}calculateSurvey(){return k(this,null,function*(){if(this.id&&this.runno){let a=new FormData;a.append("job_number",this.id),a.append("run_number",this.runno),yield this.surveyDataServices.IntiateSurveyCalculation(a,this.id,this.runno)}else console.error("No Id")})}navigateToQualityAnalysis(){this.router.navigate(["/survey/quality_analysis/",this.id,this.runno])}navigateToSurveyCalculation(){this.surveyCalculationErrorFlag?this.calculateSurvey().then(()=>{this.router.navigate(["/survey/survey_calculation/",this.id,this.runno])}):this.router.navigate(["/survey/survey_calculation/",this.id,this.runno])}};l.\u0275fac=function(o){return new(o||l)(y(P),y(Q),y($),y(z),y(G),y(U))},l.\u0275cmp=j({type:l,selectors:[["app-home"]],standalone:!0,features:[L],decls:62,vars:17,consts:[["loadedContent",""],[3,"title","activeTitle","title1"],[3,"jobNo"],[1,"grid","grid-cols-12","gap-x-6"],[1,"xl:col-span-12","col-span-12"],[1,""],["type","button","data-hs-overlay","#hs-vertically-centered-modal",1,"hs-dropdown-toggle","ti-btn","ti-btn-primary-full","!py-1","!px-2","m-2"],["id","hs-vertically-centered-modal",1,"hs-overlay","hidden","ti-modal"],[1,"hs-overlay-open:mt-7","ti-modal-box","mt-0","ease-out","min-h-[calc(100%-3.5rem)]","flex","items-center"],[1,"ti-modal-content"],[1,"ti-modal-header"],["id","staticBackdropLabel2",1,"modal-title"],["type","button","data-hs-overlay","#hs-vertically-centered-modal",1,"hs-dropdown-toggle","ti-modal-close-btn"],[1,"sr-only"],["width","8","height","8","viewBox","0 0 8 8","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-3.5","h-3.5"],["d","M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z","fill","currentColor"],[1,"ti-modal-body","mt-2"],[1,"box"],[1,"block"],["type","file","accept",".xlsx, .xls",1,"block","w-full","border","border-gray-200","focus:shadow-sm","dark:focus:shadow-white/10","rounded-sm","text-sm","focus:z-10","focus:outline-0","focus:border-gray-200","dark:focus:border-white/10","dark:border-white/10","dark:text-[#8c9097]","dark:text-white/50","file:me-4","file:py-2","file:px-4","file:rounded-s-sm","file:border-0","file:text-sm","file:font-semibold","file:bg-primary","file:text-white","hover:file:bg-primary","focus-visible:outline-none",3,"change"],[1,"ti-modal-footer"],["type","button","data-hs-overlay","#hs-vertically-centered-modal",1,"hs-dropdown-toggle","ti-btn","ti-btn-secondary-full","!py-1"],["type","button","class","ti-btn ti-btn-primary-full ti-btn-loader ti-btn-disabled !py-1",4,"ngIf","ngIfElse"],["type","button",1,"ti-btn","ti-btn-primary-full","ti-btn-loader","ti-btn-disabled","!py-1"],[1,"me-2"],[1,"loading"],[1,"ri-refresh-line","text-[1rem]","animate-spin"],[1,"ti-btn","ti-btn-primary-full","!py-1",3,"click"],[1,"xl:col-span-6","col-span-12","mt-4"],[1,"box-header","justify-between"],[1,"box-title"],[1,"box-body","!p-0","max-h-52","overflow-auto"],[1,"table-responsive","overflow-auto"],[1,"col-span-12","m-4","border","border-solid","border-gray-300","p-3","box","dark:border-gray-600","!text-[#8c9097]"],[1,"md:col-span-6","col-span-12","mb-2"],[1,"table","whitespace-nowrap","table-borderless","!text-[#8c9097]","dark:text-white/50","min-w-full"],[1,"text-start"],["scope","row",1,"form-label"],["type","button",1,"ti-btn","ti-btn-primary-full","!py-1","!px-2","ti-btn-wave","m-2",3,"click"],["type","button",1,"ti-btn","ti-btn-primary-full","!py-1","!px-2","ti-btn-wave","m-2"],["type","button",1,"ti-btn","ti-btn-primary-full","!py-1","!px-2","ti-btn-wave","m-2","ti-btn-disabled"],[1,"p-4"],["role","status",1,"ti-spinner","text-primary","p-2","m-2"]],template:function(o,d){if(o&1){let c=g();u(0,"app-page-header",1)(1,"app-job-data",2),t(2,"div",3)(3,"div",4)(4,"div",4)(5,"div",5)(6,"button",6),n(7," Import Survey "),e(),t(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h6",11),n(13,"Import Survey "),e(),t(14,"button",12)(15,"span",13),n(16,"Close"),e(),E(),t(17,"svg",14),u(18,"path",15),e()()(),I(),t(19,"div",16)(20,"div",17)(21,"div")(22,"label",18)(23,"span",13),n(24,"Choose Survey File"),e(),t(25,"input",19),f("change",function(x){return _(c),v(d.onFileSelected(x))}),e()()()()(),t(26,"div",20)(27,"button",21),n(28," Close "),e(),s(29,K,5,0,"button",22),p(30,"async"),s(31,O,2,0,"ng-template",null,0,V),e()()()(),t(33,"div",7)(34,"div",8)(35,"div",9)(36,"div",10)(37,"h6",11),n(38,"Import Survey "),e(),t(39,"button",12)(40,"span",13),n(41,"Close"),e(),E(),t(42,"svg",14),u(43,"path",15),e()()(),I(),t(44,"div",16)(45,"div",17)(46,"div")(47,"label",18)(48,"span",13),n(49,"Choose Survey File"),e(),t(50,"input",19),f("change",function(x){return _(c),v(d.onFileSelected(x))}),e()()()()(),t(51,"div",20)(52,"button",21),n(53," Close "),e(),s(54,J,5,0,"button",22),p(55,"async"),s(56,Z,2,0,"ng-template",null,0,V),e()()()()()()(),s(58,oe,2,1),p(59,"async"),p(60,"async"),s(61,ae,3,0),e()}if(o&2){let c=F(32);C("title","Survey")("activeTitle","Home")("title1","Survey"),m(),C("jobNo",d.id),m(28),C("ngIf",b(30,9,d.surveyDataServices.qualityAnalysisPostLoading$))("ngIfElse",c),m(25),C("ngIf",b(55,11,d.surveyDataServices.qualityAnalysisPostLoading$))("ngIfElse",c),m(4),S(58,!b(59,13,d.presurveyDataServices.Infoloading$)&&!b(60,15,d.rundashDataService.masterDataGetLoading$)?58:61)}},dependencies:[N,M,R,A,B,Y,q]});let i=l;return i})();export{xe as HomeComponent};
