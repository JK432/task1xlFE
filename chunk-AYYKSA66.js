import{a as j}from"./chunk-O4YZWSNL.js";import{h as E}from"./chunk-7L7TQNHG.js";import{a as D}from"./chunk-TNHGZUJI.js";import"./chunk-NY5GKKF2.js";import"./chunk-NJXWKAYO.js";import{a as se,b as le}from"./chunk-YAXZKP7E.js";import"./chunk-EQ5ZDEMS.js";import{D as z,E as f,F as Q,G as X,H as Y,J as Z,K as ee,L as te,M as ie,N as oe,O as re,Q as ne,S as ae,b as L,c as H,d as _,g as K,j as x,x as W}from"./chunk-5OVQF42F.js";import{$a as p,$b as v,Bb as r,Cb as i,Db as u,Hb as V,Jb as g,Kb as y,Rb as q,Sb as s,Tb as R,Ub as N,_a as l,aa as w,bc as T,fa as C,fc as U,g as F,gc as $,jc as B,la as b,pb as d,rb as c,uc as G,va as O,wa as P,xb as h}from"./chunk-RBD7S4WU.js";import"./chunk-YT5AF7SN.js";import"./chunk-SIAVTO45.js";var me=new F(new Y({})),J=(()=>{let t=class t{constructor(a,n){this.formBuilder=a,this.validate=n,this.addJobForm$=me.asObservable(),this.addJobForm=this.formBuilder.group({jobDetailsForm:this.formBuilder.group({jobNumber:["",[f.required,f.pattern("^OM\\d+$")]],serviceType:[-1,[f.required,j.isIntialValue(-1)]],location:["",[f.required,f.pattern(".*\\S.*")]],customer:[-1,[f.required,j.isIntialValue(-1)]],rigNo:[-1,[f.required,j.isIntialValue(-1)]],unitOfMeasure:[-1,[f.required,j.isIntialValue(-1)]],estimatedDate:["",[f.required,j.isDateFuture()]]}),assignInfoForm:this.formBuilder.group({assignto:[[],[f.required]]}),assetInfoForm:this.formBuilder.group({assetInfo:[[],f.required]})})}updateAddJobForm(a){me.next(a)}};t.\u0275fac=function(n){return new(n||t)(C(ne),C(j))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var M=(()=>{let t=class t{constructor(a){this.toastr=a,this.progressSubject=new F(new Map([["Job Info",!1],["Assign Info",!1],["Asset Info",!1]])),this.pageSubject=new F("Job Info"),this.progress=new Map,this.currentPage="",this.progressSubject.subscribe(n=>{this.progress=n}),this.pageSubject.subscribe(n=>{this.currentPage=n})}swicthPage(a,n,o=!1){o?this.pageSubject.next(n):n=="Job Info"?this.pageSubject.next(n):this.progress.get(a)?this.pageSubject.next(n):this.toastr.warning(`Submit ${a} Form first`,"Warning",{positionClass:"toast-top-center"})}updateProgress(a){this.progressSubject.next(a)}getPageSubject(){return this.pageSubject.asObservable()}getProgress(){return this.progressSubject.asObservable()}};t.\u0275fac=function(n){return new(n||t)(C(E))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Se(e,t){e&1&&(r(0,"div",6),s(1," Invalid Job Number. "),i())}function ye(e,t){if(e&1&&(r(0,"option",27),s(1),i()),e&2){let m=t.$implicit;c("value",m.id),l(),R(m.service_type)}}function _e(e,t){e&1&&(r(0,"div",6),s(1," Service Type is required. "),i())}function xe(e,t){e&1&&(r(0,"div",6),s(1," Location is required. "),i())}function De(e,t){if(e&1&&(r(0,"option",28),s(1),i()),e&2){let m=t.$implicit,a=y();c("value",m.customer_id)("selected",m.customer_id==a.selectedCustomer),l(),N(" ",m.customer_name,"")}}function Fe(e,t){e&1&&(r(0,"div",6),s(1," Customer is required. "),i())}function Ce(e,t){if(e&1&&(r(0,"option",28),s(1),i()),e&2){let m=t.$implicit,a=y();c("value",m.id)("selected",m.id==a.selectedRigNo),l(),N(" ",m.rig_number,"")}}function Ie(e,t){e&1&&(r(0,"div",6),s(1," Rig No is required. "),i())}function we(e,t){if(e&1&&(r(0,"option",28),s(1),i()),e&2){let m=t.$implicit,a=y();c("value",m.id)("selected",m.id==a.selectedUnit),l(),N("",m.unit_of_measure," ")}}function Ne(e,t){e&1&&(r(0,"div",6),s(1," Unit of Measure is required. "),i())}function Te(e,t){e&1&&(r(0,"div",6),s(1," Estimated Date is required. "),i())}function Ee(e,t){e&1&&(r(0,"div",6),s(1," Invalid Estimated Date. "),i())}function Je(e,t){if(e&1&&d(0,Te,2,0,"div",29)(1,Ee,2,0,"div",29),e&2){let m=y();c("ngIf",(m.jobDetailForm.controls.estimatedDate.errors==null?null:m.jobDetailForm.controls.estimatedDate.errors.required)&&m.jobDetailForm.controls.estimatedDate.touched),l(),c("ngIf",(m.jobDetailForm.controls.estimatedDate.errors==null?null:m.jobDetailForm.controls.estimatedDate.errors.isDateFuture)&&m.jobDetailForm.controls.estimatedDate.touched)}}var fe=(()=>{let t=class t{constructor(a,n,o,S,ge){this.data=a,this.formsServices=n,this.toastr=o,this.switcher=S,this.cdref=ge,this.intialData={rig_master:[],service_type:[],unit_of_measure:[],customers:[]},this.progress=new Map,this.serviceTypes=[],this.selectedServiceType=-1,this.rigNos=[],this.selectedRigNo=-1,this.customers=[],this.selectedCustomer=-1,this.units=[],this.selectedUnit=-1,this.jobDetailForm=this.formsServices.addJobForm.get("jobDetailsForm"),this.addJobForm=this.formsServices.addJobForm,this.switcher.getProgress().subscribe(A=>{this.progress=A}),this.data.intialData$.pipe().subscribe(A=>{this.intialData=A,this.loadData()})}loadData(){this.setServiceType(),this.setRigNo(),this.setUnitOfMeasure(),this.setCustomers()}setServiceType(){this.serviceTypes=this.intialData.service_type,this.serviceTypes.length==0?this.selectedServiceType=-1:this.selectedServiceType==-1&&(this.selectedServiceType=this.serviceTypes[0].id),this.jobDetailForm.get("serviceType")?.value==-1?(console.log("this.jobDetailForm.get('serviceType')?.value == -1"),this.jobDetailForm.patchValue({serviceType:this.selectedServiceType})):this.selectedServiceType=this.jobDetailForm.get("serviceType")?.value}setRigNo(){this.rigNos=this.intialData.rig_master,this.rigNos.length==0?this.selectedRigNo=-1:this.selectedRigNo==-1&&(this.selectedRigNo=this.rigNos[0].id),this.jobDetailForm.get("rigNo")?.value==-1?this.jobDetailForm.patchValue({rigNo:this.selectedRigNo}):this.selectedRigNo=this.jobDetailForm.get("rigNo")?.value}setUnitOfMeasure(){this.units=this.intialData.unit_of_measure,this.units.length==0?this.selectedUnit=-1:this.selectedUnit==-1&&(this.selectedUnit=this.units[0].id),this.jobDetailForm.get("unitOfMeasure")?.value==-1?this.jobDetailForm.patchValue({unitOfMeasure:this.selectedUnit}):this.selectedUnit=this.jobDetailForm.get("unitOfMeasure")?.value}setCustomers(){this.customers=this.intialData.customers,this.customers.length==0?this.selectedCustomer=-1:this.selectedCustomer==-1&&(this.selectedCustomer=this.customers[0].customer_id),this.jobDetailForm.get("customer")?.value==-1?this.jobDetailForm.patchValue({customer:this.selectedCustomer}):this.selectedCustomer=this.jobDetailForm.get("customer")?.value}onSubmit(){if(this.jobDetailForm.invalid){this.jobDetailForm.markAllAsTouched();return}else this.addJobForm.patchValue({jobDetailForm:this.jobDetailForm}),console.log(this.addJobForm),this.formsServices.updateAddJobForm(this.addJobForm),this.progress.set("Job Info",!0),this.switcher.updateProgress(this.progress),this.switcher.swicthPage("Job Info","Assign Info"),this.toastr.success("Saved Job Information","Sucess",{positionClass:"toast-top-center"})}};t.\u0275fac=function(n){return new(n||t)(p(D),p(J),p(E),p(M),p(G))},t.\u0275cmp=b({type:t,selectors:[["app-jobdetailsform"]],standalone:!0,features:[v],decls:45,vars:12,consts:[[1,"box-body"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","sm:gap-x-6","sm:gap-y-4"],[1,"xl:col-span-3","md:col-span-6","col-span-12","mb-4"],["for","jobno",1,"form-label"],["id","jobno","type","text","placeholder","","aria-label","Job No","formControlName","jobNumber",1,"form-control"],[1,"text-danger"],[1,"md:col-span-6","col-span-12","mb-4"],["for","servicetype",1,"form-label"],["id","servicetype","formControlName","serviceType",1,"form-select","!py-[0.59rem]"],[3,"value",4,"ngFor","ngForOf"],["for","location",1,"form-label"],["id","location","type","text","placeholder","","aria-label","location","formControlName","location",1,"form-control"],[1,"xl:col-span-5","md:col-span-6","col-span-12","mb-4"],["for","customer",1,"form-label"],["id","customer","formControlName","customer",1,"form-select","!py-[0.59rem]"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"xl:col-span-2","md:col-span-4","col-span-12","mb-4"],["for","rigNo",1,"form-label"],["id","rigNo","formControlName","rigNo",1,"form-select","!py-[0.59rem]"],["for","unitOfMeasure",1,"form-label"],["id","unitOfMeasure","formControlName","unitOfMeasure",1,"form-select","!py-[0.59rem]"],[1,"xl:col-span-3","md:col-span-4","col-span-12","mb-4"],["for","estimatedDate",1,"form-label"],["id","estimatedDate","type","date","aria-label","estimatedDate","formControlName","estimatedDate",1,"form-control"],[1,"md:col-span-12","col-span-12","flex","justify-end","sm:gap-x-4","sm:gap-y-4"],["type","submit",1,"ti-btn","ti-btn-primary-full","!mb-0"],[3,"value"],[3,"value","selected"],["class","text-danger",4,"ngIf"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"form",1),g("ngSubmit",function(){return o.onSubmit()}),r(2,"div",2)(3,"div",3)(4,"label",4),s(5,"Job No"),i(),u(6,"input",5),d(7,Se,2,0,"div",6),i(),r(8,"div",7)(9,"label",8),s(10,"Service Type"),i(),r(11,"select",9),d(12,ye,2,2,"option",10),i(),d(13,_e,2,0,"div",6),i(),r(14,"div",3)(15,"label",11),s(16,"Location"),i(),u(17,"input",12),d(18,xe,2,0,"div",6),i(),r(19,"div",13)(20,"label",14),s(21,"Customer"),i(),r(22,"select",15),d(23,De,2,3,"option",16),i(),d(24,Fe,2,0,"div",6),i(),r(25,"div",17)(26,"label",18),s(27,"Rig No"),i(),r(28,"select",19),d(29,Ce,2,3,"option",16),i(),d(30,Ie,2,0,"div",6),i(),r(31,"div",17)(32,"label",20),s(33,"Unit of Measure"),i(),r(34,"select",21),d(35,we,2,3,"option",16),i(),d(36,Ne,2,0,"div",6),i(),r(37,"div",22)(38,"label",23),s(39,"Estimated Date"),i(),u(40,"input",24),d(41,Je,2,2),i(),r(42,"div",25)(43,"button",26),s(44,"Next"),i()()()()()),n&2&&(l(),c("formGroup",o.jobDetailForm),l(6),h(7,o.jobDetailForm.controls.jobNumber.invalid&&(o.jobDetailForm.controls.jobNumber.dirty||o.jobDetailForm.controls.jobNumber.touched)?7:-1),l(5),c("ngForOf",o.serviceTypes),l(),h(13,o.jobDetailForm.get("serviceType").invalid&&(o.jobDetailForm.get("serviceType").dirty||o.jobDetailForm.get("serviceType").touched)?13:-1),l(5),h(18,o.jobDetailForm.controls.location.invalid&&(o.jobDetailForm.controls.location.dirty||o.jobDetailForm.controls.location.touched)?18:-1),l(5),c("ngForOf",o.customers),l(),h(24,o.jobDetailForm.controls.customer.invalid&&(o.jobDetailForm.controls.customer.dirty||o.jobDetailForm.controls.customer.touched)?24:-1),l(5),c("ngForOf",o.rigNos),l(),h(30,o.jobDetailForm.controls.rigNo.invalid&&(o.jobDetailForm.controls.rigNo.dirty||o.jobDetailForm.controls.rigNo.touched)?30:-1),l(5),c("ngForOf",o.units),l(),h(36,o.jobDetailForm.controls.unitOfMeasure.invalid&&(o.jobDetailForm.controls.unitOfMeasure.dirty||o.jobDetailForm.controls.unitOfMeasure.touched)?36:-1),l(5),h(41,o.jobDetailForm.controls.estimatedDate.invalid&&(o.jobDetailForm.controls.estimatedDate.dirty||o.jobDetailForm.controls.estimatedDate.touched)?41:-1))},dependencies:[x,H,_,ae,Z,oe,re,z,ie,Q,X,ee,te]});let e=t;return e})();var be=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=b({type:t,selectors:[["app-assetdetailsform"]],standalone:!0,features:[v],decls:2,vars:0,template:function(n,o){n&1&&(r(0,"p"),s(1,"assetdetailsform works!"),i())}});let e=t;return e})();function Me(e,t){e&1&&(r(0,"button",19)(1,"span",11),s(2,"Posting.."),i(),r(3,"span",20),u(4,"i",21),i()())}function Ae(e,t){if(e&1){let m=V();r(0,"button",22),g("click",function(){O(m);let n=y();return P(n.onSubmit())}),s(1,"Next"),i()}}var he=(()=>{let t=class t{constructor(a,n,o){this.dataServices=a,this.formsServices=n,this.router=o,this.job={assign_to:-1,customer:-1,estimated_date:new Date(Date.now()).toISOString(),job_created_date:new Date(Date.now()).toISOString(),job_number:"",location:"",rig_number:-1,service:-1,unit_of_measure:-1},this.addJobForm=this.formsServices.addJobForm,this.jobDetailForm=this.addJobForm.get("jobDetailsForm")}ngOnInit(){}onSubmit(){console.log(this.formsServices.addJobForm),this.jobDetailForm.invalid?this.jobDetailForm.markAllAsTouched():(this.job={assign_to:1,job_number:this.jobDetailForm.get("jobNumber")?.value,service:+this.jobDetailForm.get("serviceType")?.value,location:this.jobDetailForm.get("location")?.value,customer:+this.jobDetailForm.get("customer")?.value,rig_number:+this.jobDetailForm.get("rigNo")?.value,unit_of_measure:+this.jobDetailForm.get("unitOfMeasure")?.value,estimated_date:this.jobDetailForm.get("estimatedDate")?.value,job_created_date:new Date(Date.now()).toISOString()},console.log(this.job),this.dataServices.postJob(this.job).then(a=>{a&&this.router.navigate(["/admin/"])}))}};t.\u0275fac=function(n){return new(n||t)(p(D),p(J),p(W))},t.\u0275cmp=b({type:t,selectors:[["app-assigndetailsform"]],standalone:!0,features:[v],decls:26,vars:4,consts:[["loadedContent",""],[1,"xxl:col-span-12","xl:col-span-12","col-span-12"],[1,"box-body"],[1,"box-header","flex","justify-end","mb-0","col-span-12"],[1,"xl:col-span-12","col-span-12","mb-0","w-full"],["type","text","id","input-rounded1","placeholder","Search here..",1,"form-control","w-full"],[1,"list-none","mb-0"],[1,"mb-[0.9rem]"],[1,"form-check","form-check-md","!flex","items-start","flex-wrap","w-full"],["type","checkbox","value","","id","checkebox-md","checked","",1,"form-check-input"],["for","checkebox-md",1,"form-check-label","flex-grow"],[1,"me-2"],[1,"inline-flex","items-center","justify-center","!w-[1.75rem]","!h-[1.75rem]","leading-[1.75rem]","text-[0.65rem]","rounded-full","text-warning","bg-warning/10","font-semibold"],[1,"flex-grow"],[1,"font-semibold","mb-[1.4px]","text-[0.813rem]"],[1,"text-[#8c9097]","dark:text-white/50","text-[0.75rem]"],[1,"font-semibold","text-[0.9375rem]"],[1,"md:col-span-12","col-span-12","flex","justify-end","sm:gap-x-4","sm:gap-y-4"],["type","button","class","ti-btn ti-btn-primary-full ti-btn-loader ti-btn-disabled m-2",4,"ngIf","ngIfElse"],["type","button",1,"ti-btn","ti-btn-primary-full","ti-btn-loader","ti-btn-disabled","m-2"],[1,"loading"],[1,"ri-refresh-line","text-[1rem]","animate-spin"],[1,"ti-btn","ti-btn-primary-full","!mb-0",3,"click"]],template:function(n,o){if(n&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),u(4,"input",5),i()(),r(5,"div",2)(6,"ul",6)(7,"li",7)(8,"div",8),u(9,"input",9),r(10,"label",10)(11,"div",11)(12,"span",12),s(13," EK "),i()(),r(14,"div",13)(15,"p",14),s(16,"Michael Jordan "),i(),r(17,"p",15),s(18,"michael.jordan@example.com"),i()(),r(19,"div",16),s(20,"$2,893"),i()()()()()(),r(21,"div",17),d(22,Me,5,0,"button",18),U(23,"async"),d(24,Ae,2,0,"ng-template",null,0,B),i()()()),n&2){let S=q(25);l(22),c("ngIf",$(23,2,o.dataServices.jobPostLoading$))("ngIfElse",S)}},dependencies:[x,_,K]});let e=t;return e})();var k=e=>({active:e});function ke(e,t){e&1&&u(0,"app-jobdetailsform")}function Oe(e,t){e&1&&u(0,"app-assigndetailsform")}function Pe(e,t){e&1&&u(0,"app-assetdetailsform")}var it=(()=>{let t=class t{constructor(a,n){this.switcher=a,this.data=n,this.progress=new Map([["Job Info",!1],["Assign Info",!1],["Asset Info",!1]]),this.currentPage="Job Info",this.data.getIntialData(),this.data.getFieldEmployee(),this.progressSubject=this.switcher.getProgress(),this.pageSubject=this.switcher.getPageSubject(),this.progressSubject.subscribe(o=>{this.progress=o}),this.pageSubject.subscribe(o=>{this.currentPage=o,console.log(this.currentPage)})}changePage(a,n){this.switcher.swicthPage(a,n),console.log(n)}};t.\u0275fac=function(n){return new(n||t)(p(M),p(D))},t.\u0275cmp=b({type:t,selectors:[["app-addjob"]],standalone:!0,features:[v],decls:19,vars:15,consts:[[3,"title","activeTitle","title1"],[1,"col-span-12","md:col-span-6","xxl:!col-span-4"],[1,"box"],[1,"box-body"],[1,"sm:border-b-2","border-gray-200","dark:border-white/10"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse"],["id","icon-item-1","data-hs-tab","icon-1","href","javascript:void(0);","aria-controls","icon-1",1,"w-full","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:border-primary","hs-tab-active:text-primary","py-4","px-1","inline-flex","items-center","gap-2","border-b-[3px]","border-transparent","text-sm","whitespace-nowrap","text-defaulttextcolor","dark:text-[#8c9097]","dark:text-white/50","hover:text-primary",3,"click","ngClass"],["id","icon-item-2","data-hs-tab","icon-2","href","javascript:void(0);","aria-controls","icon-2",1,"w-full","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:border-primary","hs-tab-active:text-primary","py-4","px-1","inline-flex","items-center","gap-2","border-b-[3px]","border-transparent","text-sm","whitespace-nowrap","text-defaulttextcolor","dark:text-[#8c9097]","dark:text-white/50","hover:text-primary",3,"click","ngClass"],["id","icon-item-3","data-hs-tab","icon-3","href","javascript:void(0);","aria-controls","icon-3",1,"w-full","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:border-primary","hs-tab-active:text-primary","py-4","px-1","inline-flex","items-center","gap-2","border-b-[3px]","border-transparent","text-sm","whitespace-nowrap","text-defaulttextcolor","dark:text-[#8c9097]","dark:text-white/50","hover:text-primary",3,"click","ngClass"],[1,"mt-3"],["id","icon-1","aria-labelledby","icon-item-1"],[4,"ngIf"],["id","icon-2","aria-labelledby","icon-item-2"],["id","icon-3","aria-labelledby","icon-item-3"]],template:function(n,o){n&1&&(u(0,"app-page-header",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"a",6),g("click",function(){return o.changePage("","Job Info")}),s(7," Job Info "),i(),r(8,"a",7),g("click",function(){return o.changePage("Job Info","Assign Info")}),s(9," Assign Info "),i(),r(10,"a",8),g("click",function(){return o.changePage("Assign Info","Asset Info")}),s(11," Asset Info "),i()()(),r(12,"div",9)(13,"div",10),d(14,ke,1,0,"app-jobdetailsform",11),i(),r(15,"div",12),d(16,Oe,1,0,"app-assigndetailsform",11),i(),r(17,"div",13),d(18,Pe,1,0,"app-assetdetailsform",11),i()()()()()),n&2&&(c("title","Pre Survey")("activeTitle","Start Job")("title1","Pre Survey"),l(6),c("ngClass",T(9,k,o.currentPage=="Job Info")),l(2),c("ngClass",T(11,k,o.currentPage=="Assign Info")),l(2),c("ngClass",T(13,k,o.currentPage=="Asset Info")),l(4),c("ngIf",o.currentPage=="Job Info"),l(2),c("ngIf",o.currentPage=="Assign Info"),l(2),c("ngIf",o.currentPage=="Asset Info"))},dependencies:[le,se,x,L,_,fe,be,he]});let e=t;return e})();export{it as AddjobComponent};
